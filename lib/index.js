!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],t):"object"==typeof exports?exports["Redux Undo Immutable"]=t(require("immutable")):e["Redux Undo Immutable"]=t(e.immutable)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={exports:{},id:n,loaded:!1};return e[n].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1);Object.defineProperty(t,"ActionTypes",{enumerable:!0,get:function(){return u.ActionTypes}}),Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return u.ActionCreators}});var i=r(3);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(i).default}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.ActionTypes={UNDO:"@@redux-undo-immutable/UNDO",REDO:"@@redux-undo-immutable/REDO",JUMP_TO_FUTURE:"@@redux-undo-immutable/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo-immutable/JUMP_TO_PAST",JUMP:"@@redux-undo-immutable/JUMP",CLEAR_HISTORY:"@@redux-undo-immutable/CLEAR_HISTORY"};t.ActionCreators={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}}},function(e,t,r){"use strict";function n(e){return e=e||{},{undoType:e.undoType||u.ActionTypes.UNDO,redoType:e.redoType||u.ActionTypes.REDO,jumpToPastType:e.jumpToPastType||u.ActionTypes.JUMP_TO_PAST,jumpToFutureType:e.jumpToFutureType||u.ActionTypes.JUMP_TO_FUTURE,jumpType:e.jumpType||u.ActionTypes.JUMP,clearHistoryType:e.clearHistoryType||u.ActionTypes.CLEAR_HISTORY,actionFilter:e.actionFilter||function(){return!0},historyFilter:e.historyFilter||function(){return!0},limit:e.limit||0}}Object.defineProperty(t,"__esModule",{value:!0}),t.make=n;var u=r(1)},function(e,t,r){"use strict";function n(e,t,r,n){return e.historyFilter(t,r)?r:n}function u(e){var t=e.past,r=e.present,n=e.future;return t.size?f({past:t.slice(0,t.size-1),present:t.last(),future:n.unshift(r),_lastInterestingPresent:t.last()}):e}function i(e){var t=e.past,r=e.present,n=e.future;return n.size?f({past:t.push(r),present:n.first(),future:n.slice(1)}):e}function s(e){return f({present:e.present})}function o(e,t){var r=e.past,n=e.present,u=e.future;return 0===t?i(e):0>t||t>=u.size?e:f({past:r.push(n).concat(u.slice(0,t)),present:u.get(t),future:u.slice(t+1),_lastInterestingPresent:u.get(t)})}function p(e,t){var r=e.past,n=e.present,i=e.future;return t===r.size-1?u(e):0>t||t>=r.size?e:f({past:r.slice(0,t),present:r.get(t),future:r.slice(t+1).push(n).concat(i),_lastInterestingPresent:r.get(t)})}function a(e,t){return t>0?o(e,t-1):0>t?p(e,e.past.size+t):e}function c(e,t){var r=(0,d.make)(t);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,c=arguments[1];if(void 0===t){var d=e(void 0,c),T=n(r,c,d);return f({present:d,_lastInterestingPresent:T})}switch(c.type){case r.undoType:return u(t);case r.redoType:return i(t);case r.jumpToPastType:return p(t,c.index);case r.jumpToFutureType:return o(t,c.index);case r.jumpType:return a(t,c.index);case r.clearHistoryType:return s(t);default:var y=t._lastInterestingPresent,m=t.past,_=t.present,P=e(_,c),v=n(r,c,P,y);if(_===P)return t;if(!r.actionFilter(c,_,m))return t.merge({present:P,_lastInterestingPresent:v});var O=void 0!==y&&y!==m.last(),U=m;return O&&(U=m.push(y),r.limit>0&&U.size>r.limit&&(U=U.slice(1))),f({past:U,present:P,future:(0,l.List)(),_lastInterestingPresent:v})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.StateHistory=void 0;var l=r(4),d=r(2),f=t.StateHistory=(0,l.Record)({past:(0,l.List)(),present:void 0,_lastInterestingPresent:void 0,future:(0,l.List)()});t.default=c},function(t,r){t.exports=e}])});